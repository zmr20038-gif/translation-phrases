<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexiFlow - çµæ„Ÿè¯åº“</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Serif+SC:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #3b82f6; }
        body { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .dark-mode { background-color: #05070a !important; color: #e2e8f0 !important; }
        
        /* åŠ¨æ€èƒŒæ™¯å…‰æ™• */
        .glow-bg {
            position: fixed; top: -10%; left: -10%; width: 120%; height: 120%;
            background: radial-gradient(circle at 50% 50%, rgba(59,130,246,0.05) 0%, transparent 50%);
            z-index: -1; pointer-events: none;
        }

        .glass-card { 
            background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(25px); 
            border: 1px solid rgba(255,255,255,0.4); box-shadow: 0 8px 32px rgba(0,0,0,0.03);
        }
        .dark-mode .glass-card { 
            background: rgba(20, 22, 28, 0.8); border: 1px solid rgba(255,255,255,0.03); 
        }

        /* å­¦ä¹ å¡ç‰‡åŠ¨æ•ˆ */
        @keyframes floatIn {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .animate-float { animation: floatIn 0.6s ease-out forwards; }

        .dock-active { color: var(--primary); transform: translateY(-4px); font-weight: 800; }
        .view-hidden { display: none; }
        
        /* éšè—æ»šåŠ¨æ¡ */
        .scroll-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-32">
    <div class="glow-bg"></div>

    <section id="view-learn" class="px-6 pt-16 max-w-lg mx-auto view-hidden">
        <div class="relative mb-12 flex justify-center">
            <svg class="w-32 h-32 transform -rotate-90">
                <circle cx="64" cy="64" r="58" stroke="currentColor" stroke-width="4" fill="transparent" class="text-gray-100 dark:text-gray-800" />
                <circle id="progress-bar" cx="64" cy="64" r="58" stroke="var(--primary)" stroke-width="4" fill="transparent" 
                    stroke-dasharray="364.4" stroke-dashoffset="364.4" class="transition-all duration-1000 ease-out" stroke-linecap="round" />
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span class="text-3xl font-black serif-title" id="dash-review">0</span>
                <span class="text-[9px] text-gray-400 font-bold tracking-widest uppercase">Upcoming</span>
            </div>
        </div>

        <div id="learn-card-container" class="min-h-[400px]">
            </div>

        <div id="learn-empty" class="text-center py-20 view-hidden animate-float">
            <div class="w-20 h-20 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mx-auto mb-6 text-3xl">ğŸŒ¿</div>
            <p class="text-gray-500 font-medium">æ‰€æœ‰çš„ç§å­éƒ½å·²æ’­ä¸‹</p>
            <button onclick="switchView('search')" class="mt-6 text-blue-500 font-bold text-sm underline underline-offset-8 uppercase tracking-widest">Explore More</button>
        </div>
    </section>

    <section id="view-search" class="px-6 pt-12 max-w-2xl mx-auto">
        <div class="mb-10 animate-float">
            <h1 class="text-4xl font-black serif-title mb-2">LexiFlow</h1>
            <p class="text-gray-400 text-xs tracking-widest uppercase">Explore Professional Vocabulary</p>
        </div>

        <div class="glass-card rounded-[2.5rem] p-10 mb-8 border-none relative overflow-hidden group">
            <div class="absolute top-0 right-0 p-8 opacity-5 text-8-xl font-black uppercase pointer-events-none" id="feat-bg-txt">PICK</div>
            <div class="relative z-10">
                <h2 id="feat-en" class="text-4xl font-black mb-2 tracking-tight">Focus</h2>
                <p id="feat-zh" class="text-blue-500 font-medium mb-4">åŠ è½½ä¸­...</p>
                <p id="feat-detail" class="text-sm text-gray-400 leading-relaxed"></p>
            </div>
        </div>

        <div class="sticky top-6 z-50 mb-8">
            <div class="glass-card rounded-3xl flex items-center px-6 shadow-2xl border-white/20">
                <span class="text-xl mr-4">ğŸ”</span>
                <input type="text" id="global-search" oninput="renderSearch()" placeholder="Search terms..." 
                    class="w-full bg-transparent py-5 focus:outline-none text-lg font-medium">
            </div>
        </div>

        <div class="flex space-x-2 mb-8 overflow-x-auto scroll-hide pb-2">
            <button onclick="setCategory('all')" id="cat-all" class="px-5 py-2 rounded-2xl glass-card text-[11px] font-black transition-all">ALL</button>
            <button onclick="setCategory('legal')" id="cat-legal" class="px-5 py-2 rounded-2xl glass-card text-[11px] font-black transition-all">âš–ï¸ LEGAL</button>
            <button onclick="setCategory('gaming')" id="cat-gaming" class="px-5 py-2 rounded-2xl glass-card text-[11px] font-black transition-all">ğŸ® GAMING</button>
            <button onclick="setCategory('food')" id="cat-food" class="px-5 py-2 rounded-2xl glass-card text-[11px] font-black transition-all">ğŸ± FOOD</button>
        </div>

        <div id="search-results" class="space-y-3"></div>
    </section>

    <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 w-72 h-20 glass-card rounded-[2.5rem] shadow-2xl flex items-center justify-around px-4 z-[100] border-white/30">
        <button onclick="switchView('learn')" id="dock-learn" class="flex flex-col items-center transition-all opacity-40 hover:opacity-100">
            <span class="text-2xl">ğŸŒ±</span>
            <span class="text-[8px] font-black uppercase mt-1">Learn</span>
        </button>
        <button onclick="switchView('search')" id="dock-search" class="flex flex-col items-center transition-all dock-active">
            <span class="text-2xl">ğŸ§©</span>
            <span class="text-[8px] font-black uppercase mt-1">Search</span>
        </button>
        <button onclick="toggleDarkMode()" class="flex flex-col items-center transition-all opacity-40 hover:opacity-100">
            <span id="dark-icon" class="text-2xl">ğŸŒ™</span>
            <span class="text-[8px] font-black uppercase mt-1">Theme</span>
        </button>
    </nav>

    <script>
        // æ ¸å¿ƒè¯æ±‡æ•°æ®
        const vocabulary = {
            legal: [
                { id: 'l1', en: "Without Prejudice", zh: "ä¸æŸå®³ï¼›æ— åè§", detail: "ä¸æ„æˆå¯¹è‡ªèº«æƒåˆ©çš„æ”¾å¼ƒæˆ–å¯¹äº‹å®çš„æ‰¿è®¤ã€‚" },
                { id: 'l2', en: "Indemnification", zh: "è¡¥å¿ï¼›èµ”å¿", detail: "ä¸€æ–¹æ‰¿è¯ºèµ”å¿å¦ä¸€æ–¹é­å—çš„æŸå¤±ã€‚" },
                { id: 'l3', en: "Force Majeure", zh: "ä¸å¯æŠ—åŠ›", detail: "ä¸èƒ½é¢„è§ã€é¿å…ä¸”å…‹æœçš„å®¢è§‚æƒ…å†µã€‚" },
                { id: 'l4', en: "Due Diligence", zh: "å°½èŒè°ƒæŸ¥", detail: "ç­¾ç½²åˆåŒå‰çš„å…¨é¢å®¡æŸ¥ã€‚" },
                { id: 'l5', en: "Joint and Several Liability", zh: "è¿å¸¦è´£ä»»", detail: "å¤šä¸ªä¸»ä½“å…±åŒæ‰¿æ‹…å…¨éƒ¨å€ºåŠ¡ã€‚" },
                { id: 'l6', en: "Breach of Contract", zh: "è¿çº¦", detail: "æœªèƒ½æŒ‰ç…§åˆåŒçº¦å®šå±¥è¡Œä¹‰åŠ¡ã€‚" },
                { id: 'l7', en: "Arbitration", zh: "ä»²è£", detail: "æäº¤ç¬¬ä¸‰æ–¹è£å†³çš„çº çº·è§£å†³æ–¹å¼ã€‚" },
                { id: 'l8', en: "Intellectual Property", zh: "çŸ¥è¯†äº§æƒ", detail: "å…³äºä½œå“ã€å‘æ˜ç­‰æ™ºåŠ›æˆæœçš„æƒåˆ©ã€‚" },
                { id: 'l9', en: "Statute of Limitations", zh: "è¯‰è®¼æ—¶æ•ˆ", detail: "æƒåˆ©äººè¯·æ±‚æƒçš„æ³•å®šæœŸé—´ã€‚" },
                { id: 'l10', en: "Articles of Association", zh: "å…¬å¸ç« ç¨‹", detail: "è§„å®šå…¬å¸ç»„ç»‡åŸåˆ™çš„åŸºæœ¬å‡†åˆ™ã€‚" },
                { id: 'l11', en: "Power of Attorney", zh: "æˆæƒå§”æ‰˜ä¹¦", detail: "ä¹¦é¢æˆæƒä»–äººè¡Œä½¿æ³•å¾‹æƒåŠ›çš„æ–‡ä»¶ã€‚" },
                { id: 'l12', en: "Liquidated Damages", zh: "çº¦å®šè¿çº¦é‡‘", detail: "é¢„å…ˆçº¦å®šçš„è¿çº¦èµ”å¿é‡‘é¢ã€‚" },
                { id: 'l13', en: "Good Faith", zh: "è¯šå®ä¿¡ç”¨", detail: "æ°‘æ³•åŸºæœ¬åŸåˆ™ï¼Œè¦æ±‚è¯šå®å®ˆä¿¡ã€‚" },
                { id: 'l14', en: "Burden of Proof", zh: "ä¸¾è¯è´£ä»»", detail: "å½“äº‹äººå¯¹è‡ªå·±ä¸»å¼ æœ‰è¯æ˜è´£ä»»ã€‚" },
                { id: 'l15', en: "Conflict of Interest", zh: "åˆ©ç›Šå†²çª", detail: "ä¸ªäººåˆ©ç›Šä¸èŒå®ˆä¹‹é—´çš„ç«äº‰ã€‚" },
                { id: 'l16', en: "NDA", zh: "ä¿å¯†åè®®", detail: "çº¦å®šä¸å‘ç¬¬ä¸‰æ–¹æ³„éœ²ç‰¹å®šä¿¡æ¯çš„åè®®ã€‚" },
                { id: 'l17', en: "Exclusive Jurisdiction", zh: "ä¸“å±ç®¡è¾–", detail: "æ¡ˆä»¶åªèƒ½ç”±ç‰¹å®šæ³•é™¢å—ç†ã€‚" },
                { id: 'l18', en: "Termination for Convenience", zh: "ä»»æ„è§£é™¤", detail: "æ— éœ€ç†ç”±å³å¯ç»ˆæ­¢åˆåŒçš„æƒåˆ©ã€‚" },
                { id: 'l19', en: "Duty of Care", zh: "æ³¨æ„ä¹‰åŠ¡", detail: "åº”è¾¾åˆ°çš„åˆç†è°¨æ…ç¨‹åº¦ã€‚" },
                { id: 'l20', en: "Legal Entity", zh: "æ³•äººå®ä½“", detail: "ç‹¬ç«‹æ‰¿æ‹…æ°‘äº‹è´£ä»»çš„ç»„ç»‡ã€‚" },
                { id: 'l21', en: "Governing Law", zh: "ç®¡è¾–æ³•å¾‹", detail: "è§£å†³äº‰è®®æ‰€é€‚ç”¨çš„å›½å®¶æ³•å¾‹ã€‚" },
                { id: 'l22', en: "Service of Process", zh: "æ–‡ä¹¦é€è¾¾", detail: "äº¤ä»˜æ³•å¾‹æ–‡ä¹¦çš„æ³•å®šç¨‹åºã€‚" },
                { id: 'l23', en: "Injunction", zh: "ç¦ä»¤", detail: "æ³•é™¢å‘å¸ƒçš„å¼ºåˆ¶æˆ–ç¦æ­¢å‘½ä»¤ã€‚" },
                { id: 'l24', en: "Assignment", zh: "è½¬è®©", detail: "å°†åˆåŒæƒåˆ©ç§»äº¤ç»™ç¬¬ä¸‰æ–¹çš„è¡Œä¸ºã€‚" },
                { id: 'l25', en: "Pro Bono", zh: "æ³•å¾‹æ´åŠ©", detail: "å…è´¹æä¾›çš„ä¸“ä¸šå…¬ç›ŠæœåŠ¡ã€‚" },
                { id: 'l26', en: "Reasonable Doubt", zh: "åˆç†æ€€ç–‘", detail: "åˆ‘äº‹è¯‰è®¼ä¸­å®šç½ªå¿…é¡»æ’é™¤çš„æ ‡å‡†ã€‚" },
                { id: 'l27', en: "Non-Compete", zh: "ç«ä¸šé™åˆ¶", detail: "ç¦»èŒåä¸å¾—ä»äº‹ç«äº‰ä¸šåŠ¡çš„çº¦å®šã€‚" },
                { id: 'l28', en: "Public Domain", zh: "å…¬æœ‰é¢†åŸŸ", detail: "ä¸å†å—äº§æƒä¿æŠ¤çš„å…¬å¼€ä½œå“ã€‚" },
                { id: 'l29', en: "Precedent", zh: "åˆ¤ä¾‹", detail: "å…·æœ‰çº¦æŸåŠ›çš„å…ˆå‰æ³•é™¢è£å†³ã€‚" },
                { id: 'l30', en: "Waiver", zh: "å¼ƒæƒ", detail: "è‡ªæ„¿æ”¾å¼ƒå·²çŸ¥æƒåˆ©çš„æ³•å¾‹è¡Œä¸ºã€‚" }
            ],
            gaming: [
                { id: 'g1', en: "Fog of War", zh: "æˆ˜äº‰è¿·é›¾", detail: "åœ°å›¾ä¸Šæœªæ¢ç´¢åŒºåŸŸè¢«é˜´å½±è¦†ç›–çš„æœºåˆ¶ã€‚" },
                { id: 'g2', en: "Cooldown", zh: "å†·å´æ—¶é—´", detail: "å†æ¬¡ä½¿ç”¨æŠ€èƒ½å‰å¿…é¡»ç­‰å¾…çš„æ—¶é—´ã€‚" },
                { id: 'g3', en: "Aggro", zh: "ä»‡æ¨å€¼", detail: "è¡¡é‡æ€ªç‰©å¯¹ç©å®¶æ”»å‡»æ¬²æœ›çš„æ•°å€¼ã€‚" },
                { id: 'g4', en: "Buff / Debuff", zh: "å¢ç›Š/å‡ç›Š", detail: "è§’è‰²çš„æ­£é¢æˆ–è´Ÿé¢çŠ¶æ€å½±å“ã€‚" },
                { id: 'g5', en: "Easter Egg", zh: "å½©è›‹", detail: "éšè—çš„æƒŠå–œä¿¡æ¯æˆ–å¹½é»˜å†…å®¹ã€‚" },
                { id: 'g6', en: "Hitbox", zh: "ç¢°æ’æ¡†", detail: "ç”¨äºæ£€æµ‹å—å‡»çš„éšå½¢å‡ ä½•ä½“ã€‚" },
                { id: 'g7', en: "Proc", zh: "è§¦å‘", detail: "éšæœºæ¦‚ç‡æ•ˆæœè¢«æˆåŠŸæ¿€æ´»ã€‚" },
                { id: 'g8', en: "Loot Box", zh: "å¼€ç®±", detail: "åŒ…å«éšæœºè™šæ‹Ÿå¥–åŠ±çš„å®¹å™¨ã€‚" },
                { id: 'g9', en: "Fast Travel", zh: "å¿«é€Ÿæ—…è¡Œ", detail: "åœ¨å·²å‘ç°åœ°ç‚¹é—´ç¬é—´ç§»åŠ¨ã€‚" },
                { id: 'g10', en: "Permadeath", zh: "æ°¸ä¹…æ­»äº¡", detail: "è§’è‰²æ­»äº¡åå­˜æ¡£å³å¤±æ•ˆã€‚" },
                { id: 'g11', en: "QoL", zh: "ä½“éªŒä¼˜åŒ–", detail: "æå‡æ“ä½œä¾¿æ·åº¦çš„å°æ”¹åŠ¨ã€‚" },
                { id: 'g12', en: "NPC", zh: "éç©å®¶è§’è‰²", detail: "ç”±ç”µè„‘æ§åˆ¶çš„è§’è‰²ã€‚" },
                { id: 'g13', en: "Meta", zh: "ä¸»æµç­–ç•¥", detail: "å½“å‰ç‰ˆæœ¬ä¸‹çš„æœ€ä¼˜ç©æ³•æ­é…ã€‚" },
                { id: 'g14', en: "New Game Plus", zh: "äºŒå‘¨ç›®", detail: "é€šå…³åç»§æ‰¿è£…å¤‡é‡æ–°å¼€å§‹ã€‚" },
                { id: 'g15', en: "Microtransaction", zh: "å†…è´­", detail: "æ¸¸æˆå†…çš„å°é¢æ¶ˆè´¹è¡Œä¸ºã€‚" },
                { id: 'g16', en: "Sandbox", zh: "æ²™ç›’", detail: "é«˜è‡ªç”±åº¦çš„åˆ›é€ ç±»ç©æ³•ã€‚" },
                { id: 'g17', en: "Vertical Slice", zh: "å‚ç›´åˆ‡ç‰‡", detail: "å±•ç¤ºæœ€ç»ˆè´¨æ„Ÿçš„å®Œæ•´åŸå‹ã€‚" },
                { id: 'g18', en: "Spawn", zh: "ç”Ÿæˆ", detail: "è§’è‰²åœ¨åœ°å›¾ä¸Šå‡ºç°çš„ç‚¹æˆ–è¿‡ç¨‹ã€‚" },
                { id: 'g19', en: "Gacha", zh: "æŠ½å¡", detail: "éšæœºè·å–å¥–åŠ±çš„å•†ä¸šæ¨¡å¼ã€‚" },
                { id: 'g20', en: "Haptic", zh: "è§¦è§‰åé¦ˆ", detail: "æ§åˆ¶å™¨å‘å‡ºçš„ç»†è…»éœ‡åŠ¨æ•ˆæœã€‚" },
                { id: 'g21', en: "Skill Tree", zh: "æŠ€èƒ½æ ‘", detail: "å±•ç¤ºèƒ½åŠ›æˆé•¿è·¯å¾„çš„ç³»ç»Ÿã€‚" },
                { id: 'g22', en: "Ray Tracing", zh: "å…‰çº¿è¿½è¸ª", detail: "æ¨¡æ‹Ÿå…‰çº¿ç‰©ç†è¡Œä¸ºçš„å›¾å½¢æŠ€æœ¯ã€‚" },
                { id: 'g23', en: "Grinding", zh: "åˆ·æ€ª", detail: "æœºæ¢°æ€§é‡å¤æˆ˜æ–—ä»¥è·å–ç»éªŒã€‚" },
                { id: 'g24', en: "Early Access", zh: "æŠ¢å…ˆä½“éªŒ", detail: "æœªå®Œå·¥å³å¼€æ”¾è´­ä¹°æµ‹è¯•ã€‚" },
                { id: 'g25', en: "Speedrun", zh: "é€Ÿé€š", detail: "ä»¥æœ€å¿«é€Ÿåº¦å®Œæˆæ¸¸æˆæŒ‘æˆ˜ã€‚" },
                { id: 'g26', en: "Dynamic Weather", zh: "åŠ¨æ€å¤©æ°”", detail: "éšæ—¶é—´è‡ªåŠ¨å˜åŒ–çš„ç³»ç»Ÿã€‚" },
                { id: 'g27', en: "Mana / MP", zh: "æ³•åŠ›å€¼", detail: "æ–½æ”¾æŠ€èƒ½æ‰€æ¶ˆè€—çš„èƒ½é‡ã€‚" },
                { id: 'f28', en: "Side Quest", zh: "æ”¯çº¿ä»»åŠ¡", detail: "éä¸»çº¿çš„é¢å¤–å¯é€‰ä»»åŠ¡ã€‚" },
                { id: 'g29', en: "DLC", zh: "ä¸‹è½½å†…å®¹", detail: "å‘å”®åå‘å¸ƒçš„æ•°å­—æ‰©å±•å†…å®¹ã€‚" },
                { id: 'g30', en: "Mod", zh: "æ¨¡ç»„", detail: "ç©å®¶å¼€å‘çš„ä¿®æ”¹æˆ–æ’ä»¶ã€‚" }
            ],
            food: [
                { id: 'f1', en: "Maillard", zh: "ç¾æ‹‰å¾·ååº”", detail: "é«˜æ¸©ä¸‹äº§ç”Ÿçš„é£å‘³è¤å˜ååº”ã€‚" },
                { id: 'f2', en: "Stir-fry", zh: "ç…¸ç‚’", detail: "å°‘é‡çƒ­æ²¹ä¸­å¿«é€Ÿç¿»ç‚’é£Ÿæã€‚" },
                { id: 'f3', en: "Al Dente", zh: "å¼¹ç‰™", detail: "æ„é¢ç…®å¾—ä¸­å¿ƒç¨ç¡¬æœ‰åš¼åŠ²ã€‚" },
                { id: 'f4', en: "Aroma Wheel", zh: "é£å‘³è½®", detail: "æè¿°é£å‘³çš„ç³»ç»Ÿå›¾è°±ã€‚" },
                { id: 'f5', en: "Red-braised", zh: "çº¢çƒ§", detail: "åˆ©ç”¨é…±æ²¹å†°ç³–ä¸Šè‰²çš„æŠ€æ³•ã€‚" },
                { id: 'f6', en: "Farm-to-table", zh: "å†œåœºåˆ°é¤æ¡Œ", detail: "å¼ºè°ƒé£Ÿææ–°é²œå½“åœ°çš„ç†å¿µã€‚" },
                { id: 'f7', en: "Acidity", zh: "é…¸åº¦", detail: "æ˜äº®ä¸”ä»¤äººæ„‰æ‚¦çš„é…¸æ„Ÿã€‚" },
                { id: 'f8', en: "Simmer", zh: "æ–‡ç«æ…¢ç‚–", detail: "ä¿æŒæ¶²ä½“æ¥è¿‘æ²¸ç‚¹å°ç«åŠ çƒ­ã€‚" },
                { id: 'f9', en: "Cleanser", zh: "æ¸…å£èœ", detail: "æ¸…é™¤å‰èœä½™å‘³çš„å†°æ²™ç­‰ã€‚" },
                { id: 'f10', en: "Wok Hei", zh: "é•¬æ°”", detail: "é«˜æ¸©äº§ç”Ÿçš„çµé­‚ç„¦é¦™å‘³ã€‚" },
                { id: 'f11', en: "Mouthfeel", zh: "å£æ„Ÿ", detail: "å£è…”å†…äº§ç”Ÿçš„ç‰©ç†æ„Ÿå—ã€‚" },
                { id: 'f12', en: "Deep-fry", zh: "æ²¹ç‚¸", detail: "å®Œå…¨æµ¸å…¥æ²¹è„‚çƒ¹é¥ªçš„æ–¹æ³•ã€‚" },
                { id: 'f13', en: "Umami", zh: "é²œå‘³", detail: "é™¤äº†é…¸ç”œè‹¦å’¸å¤–çš„ç¬¬äº”å‘³ã€‚" },
                { id: 'f14', en: "Sous-vide", zh: "ä½æ¸©æ…¢ç…®", detail: "çœŸç©ºåŒ…è£…æ’æ¸©åŠ çƒ­æŠ€æ³•ã€‚" },
                { id: 'f15', en: "Blanch", zh: "ç„¯æ°´", detail: "çŸ­æš‚æ”¾å…¥æ²¸æ°´ä¸­çƒ«æ´—ã€‚" },
                { id: 'f16', en: "Sommelier", zh: "ä¾é…’å¸ˆ", detail: "ä¸“ä¸šçš„é…’æ°´é…é¤å»ºè®®ä¸“å®¶ã€‚" },
                { id: 'f17', en: "Infusion", zh: "æµ¸æ¸", detail: "æ¶²ä½“æå–é£Ÿæé£å‘³çš„è¿‡ç¨‹ã€‚" },
                { id: 'f18', en: "Zest", zh: "çš®å±‘", detail: "æŸ‘æ©˜ç±»æ°´æœæœ€å¤–å±‚èŠ³é¦™çš®ã€‚" },
                { id: 'f19', en: "Dim Sum", zh: "ç‚¹å¿ƒ", detail: "ç²¾è‡´çš„ç²¤å¼èŒ¶ç‚¹å°åƒã€‚" },
                { id: 'f20', en: "Decant", zh: "é†’é…’", detail: "å€’å‡ºé…’æ¶²ä½¿å…¶ä¸ç©ºæ°”æ¥è§¦ã€‚" },
                { id: 'f21', en: "Texture", zh: "è´¨åœ°", detail: "æè¿°è„†ã€è½¯ã€é…¥ç­‰ç‰©ç†ç‰¹å¾ã€‚" },
                { id: 'f22', en: "Garnish", zh: "ç›˜é¥°", detail: "ç”¨äºè£…é¥°èœè‚´çš„ç‚¹ç¼€ç‰©ã€‚" },
                { id: 'f23', en: "Steaming", zh: "è’¸", detail: "åˆ©ç”¨æ°´è’¸æ°”åŠ çƒ­ä¿ç•™è¥å…»ã€‚" },
                { id: 'f24', en: "Tannin", zh: "å•å®", detail: "çº¢é…’ä¸­å¸¦æ¥çš„æ”¶æ•›æ¶©æ„Ÿã€‚" },
                { id: 'f25', en: "Fermentation", zh: "å‘é…µ", detail: "å¾®ç”Ÿç‰©è½¬åŒ–é£Ÿç‰©çš„è¿‡ç¨‹ã€‚" },
                { id: 'f26', en: "Velveting", zh: "ä¸Šæµ†", detail: "è‚‰ç±»è£¹æ·€ç²‰ä¿æŒé²œå«©è´¨æ„Ÿã€‚" },
                { id: 'f27', en: "Body", zh: "é…’ä½“/é†‡åšåº¦", detail: "æè¿°æ¶²ä½“åœ¨å£ä¸­çš„é‡é‡æ„Ÿã€‚" },
                { id: 'f28', en: "Glaze", zh: "æŒ‚æ±", detail: "åœ¨é£Ÿç‰©è¡¨é¢æ·‹ä¸Šå‘äº®æ¶²ä½“ã€‚" },
                { id: 'f29', en: "Offal", zh: "å†…è„", detail: "åŠ¨ç‰©çš„å¯é£Ÿç”¨å™¨å®˜æ‚ç¢ã€‚" },
                { id: 'f30', en: "Aftertaste", zh: "ä½™éŸµ", detail: "åå’½åç•™åœ¨å–‰é—´çš„é£å‘³ã€‚" }
            ]
        };

        let currentCat = 'all';
        let currentView = 'search';
        let isDark = false;
        const intervals = [0, 1, 12, 24, 48, 168, 360, 720];

        function getMem() { return JSON.parse(localStorage.getItem('lexi_v3') || '{}'); }
        
        function saveMem(id, known) {
            let m = getMem();
            let r = m[id] || { level: 0, time: 0 };
            known ? r.level = Math.min(r.level + 1, 7) : r.level = Math.max(r.level - 1, 0);
            r.time = Date.now() + intervals[r.level] * 3600000;
            m[id] = r;
            localStorage.setItem('lexi_v3', JSON.stringify(m));
            renderAll();
        }

        function switchView(view) {
            currentView = view;
            document.getElementById('view-learn').classList.toggle('view-hidden', view !== 'learn');
            document.getElementById('view-search').classList.toggle('view-hidden', view !== 'search');
            document.getElementById('dock-learn').classList.toggle('dock-active', view === 'learn');
            document.getElementById('dock-search').classList.toggle('dock-active', view === 'search');
            renderAll();
        }

        function renderSearch() {
            if(currentView !== 'search') return;
            const q = document.getElementById('global-search').value.toLowerCase();
            let list = [];
            if(currentCat === 'all') Object.values(vocabulary).forEach(c => list.push(...c));
            else list = vocabulary[currentCat] || [];

            list.sort((a,b) => a.en.localeCompare(b.en));
            const filtered = list.filter(i => i.en.toLowerCase().includes(q) || i.zh.includes(q));
            const mem = getMem();

            document.getElementById('search-results').innerHTML = filtered.map(item => `
                <div class="glass-card p-6 rounded-3xl flex justify-between items-center animate-float" onclick="saveMem('${item.id}', true)">
                    <div>
                        <h3 class="font-bold text-lg tracking-tight">${item.en}</h3>
                        <p class="text-gray-400 text-sm font-medium">${item.zh}</p>
                    </div>
                    <div class="flex space-x-0.5">
                        ${Array.from({length:7}).map((_,i) => `<div class="w-1 h-3 rounded-full ${i < (mem[item.id]?.level || 0) ? 'bg-blue-500' : 'bg-gray-200 dark:bg-gray-800'}"></div>`).join('')}
                    </div>
                </div>
            `).join('');

            // æ¯æ—¥æ¨è
            if(!q && list.length > 0) {
                const feat = list[Math.floor(Date.now()/86400000) % list.length];
                document.getElementById('feat-en').innerText = feat.en;
                document.getElementById('feat-zh').innerText = feat.zh;
                document.getElementById('feat-detail').innerText = feat.detail;
            }
        }

        function renderLearn() {
            if(currentView !== 'learn') return;
            const mem = getMem();
            const now = Date.now();
            const all = Object.values(vocabulary).flat();
            const toReview = all.filter(i => mem[i.id] && mem[i.id].time < now);
            
            document.getElementById('dash-review').innerText = toReview.length;
            const bar = document.getElementById('progress-bar');
            const offset = 364.4 - (Math.min(toReview.length, 20) / 20 * 364.4);
            bar.style.strokeDashoffset = offset;

            const container = document.getElementById('learn-card-container');
            if(toReview.length === 0) {
                document.getElementById('learn-empty').classList.remove('view-hidden');
                container.innerHTML = '';
            } else {
                document.getElementById('learn-empty').classList.add('view-hidden');
                const item = toReview[0];
                container.innerHTML = `
                    <div class="glass-card p-12 rounded-[3.5rem] shadow-2xl text-center border-b-8 border-blue-500/10 animate-float">
                        <h2 class="text-5xl font-black mb-10 serif-title tracking-tighter">${item.en}</h2>
                        <div class="mb-12 h-24 flex flex-col justify-center items-center">
                            <div id="ans-box" class="opacity-0 transition-all duration-500 transform scale-90">
                                <p class="text-2xl font-bold mb-2">${item.zh}</p>
                                <p class="text-xs text-gray-400 px-6 leading-relaxed">${item.detail}</p>
                            </div>
                            <button id="show-btn" onclick="document.getElementById('ans-box').classList.remove('opacity-0','scale-90'); this.remove()" class="text-[10px] font-black tracking-widest text-blue-500 uppercase border-b border-blue-200 pb-1">Show Meaning</button>
                        </div>
                        <div class="flex space-x-4">
                            <button onclick="saveMem('${item.id}', true)" class="flex-1 py-5 rounded-3xl bg-blue-500 text-white font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all">GOT IT</button>
                            <button onclick="saveMem('${item.id}', false)" class="flex-1 py-5 rounded-3xl bg-gray-100 dark:bg-gray-800 text-gray-400 font-black active:scale-95 transition-all">AGAIN</button>
                        </div>
                    </div>
                `;
            }
        }

        function setCategory(cat) {
            currentCat = cat;
            ['all','legal','gaming','food'].forEach(c => {
                document.getElementById('cat-'+c).classList.toggle('bg-blue-500', c === cat);
                document.getElementById('cat-'+c).classList.toggle('text-white', c === cat);
            });
            renderSearch();
        }

        function toggleDarkMode() {
            isDark = !isDark;
            document.body.classList.toggle('dark-mode');
            document.getElementById('dark-icon').innerText = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        function renderAll() {
            renderSearch();
            renderLearn();
        }

        window.onload = () => {
            renderAll();
            setCategory('all');
        };
    </script>
</body>
</html>
