<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LexiFlow - çµæ„Ÿè¯åº“</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&family=Noto+Serif+SC:wght@700&display=swap" rel="stylesheet">
    <style>
        body { background: #f8fafc; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .dark-mode { background: #020617 !important; color: #f1f5f9; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); transition: all 0.3s ease; }
        .dark-mode .glass { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(255, 255, 255, 0.05); }
        .view-hidden { display: none !important; }
        .active-tab { color: #3b82f6 !important; font-weight: 900; }
        .card-bounce:active { transform: scale(0.96); }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* éšè—æ»šåŠ¨æ¡ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="min-h-screen pb-32">

    <main id="view-search" class="px-6 pt-10 max-w-2xl mx-auto fade-in">
        <header class="mb-8">
            <h1 class="text-4xl font-black tracking-tighter italic">LexiFlow</h1>
            <p class="text-[10px] text-gray-400 tracking-[0.3em] uppercase mt-1">Professional Vocabulary Pro</p>
        </header>
        
        <div class="glass rounded-3xl mb-6 flex items-center px-6 shadow-sm border-none">
            <span class="text-xl">ğŸ”</span>
            <input type="text" id="searchInput" oninput="doSearch()" placeholder="å¿«é€Ÿæœç´¢è‹±æ–‡æˆ–ä¸­æ–‡..." 
                   class="w-full bg-transparent py-5 px-4 focus:outline-none text-lg font-medium">
        </div>

        <div class="flex space-x-2 mb-8 overflow-x-auto no-scrollbar" id="catFilter">
            <button onclick="setCat('all')" class="flex-none px-6 py-2 rounded-2xl glass text-[10px] font-black bg-blue-500 text-white transition-all">ALL</button>
            <button onclick="setCat('legal')" class="flex-none px-6 py-2 rounded-2xl glass text-[10px] font-black hover:bg-white/50">âš–ï¸ LEGAL</button>
            <button onclick="setCat('gaming')" class="flex-none px-6 py-2 rounded-2xl glass text-[10px] font-black hover:bg-white/50">ğŸ® GAMING</button>
            <button onclick="setCat('food')" class="flex-none px-6 py-2 rounded-2xl glass text-[10px] font-black hover:bg-white/50">ğŸ± FOOD</button>
        </div>

        <div id="listContainer" class="space-y-3"></div>
    </main>

    <main id="view-learn" class="px-6 pt-20 max-w-md mx-auto view-hidden fade-in text-center">
        <div class="mb-12">
            <div class="inline-block px-4 py-1 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-500 text-[10px] font-black tracking-widest uppercase mb-4">
                Smart Review
            </div>
            <p id="reviewCount" class="text-7xl font-black tracking-tighter">0</p>
            <p class="text-gray-400 text-xs mt-2 font-bold uppercase tracking-widest">Pending Task</p>
        </div>
        <div id="cardStage" class="min-h-[300px]"></div>
    </main>

    <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 w-72 h-20 glass rounded-[2.5rem] shadow-2xl flex items-center justify-around z-[100] border-white/40">
        <button onclick="showPage('learn')" id="btn-learn" class="flex flex-col items-center text-gray-400 transition-all">
            <span class="text-2xl">ğŸŒ±</span>
            <span class="text-[8px] font-black mt-1 uppercase tracking-tighter">Learn</span>
        </button>
        <button onclick="showPage('search')" id="btn-search" class="flex flex-col items-center active-tab transition-all">
            <span class="text-2xl">ğŸ§©</span>
            <span class="text-[8px] font-black mt-1 uppercase tracking-tighter">Search</span>
        </button>
        <button onclick="toggleDark()" class="flex flex-col items-center text-gray-400 transition-all">
            <span id="darkIcon" class="text-2xl">ğŸŒ™</span>
            <span class="text-[8px] font-black mt-1 uppercase tracking-tighter">Theme</span>
        </button>
    </nav>

    <script>
        // æ•´åˆåçš„ 90 ä¸ªå®Œæ•´è¯æ¡
        const library = [
            // LEGAL (30)
            { id:'l1', cat:'legal', en:'Without Prejudice', zh:'ä¸æŸå®³ï¼›æ— åè§', d:'ä¸æ„æˆå¯¹è‡ªèº«æƒåˆ©çš„æ”¾å¼ƒæˆ–å¯¹äº‹å®çš„æ‰¿è®¤ã€‚' },
            { id:'l2', cat:'legal', en:'Indemnification', zh:'è¡¥å¿ï¼›èµ”å¿', d:'ä¸€æ–¹æ‰¿è¯ºèµ”å¿å¦ä¸€æ–¹é­å—çš„æŸå¤±ã€‚' },
            { id:'l3', cat:'legal', en:'Force Majeure', zh:'ä¸å¯æŠ—åŠ›', d:'ä¸èƒ½é¢„è§ã€é¿å…ä¸”å…‹æœçš„å®¢è§‚æƒ…å†µã€‚' },
            { id:'l4', cat:'legal', en:'Due Diligence', zh:'å°½èŒè°ƒæŸ¥', d:'ç­¾ç½²åˆåŒå‰çš„å…¨é¢å®¡æŸ¥ã€‚' },
            { id:'l5', cat:'legal', en:'Joint and Several Liability', zh:'è¿å¸¦è´£ä»»', d:'å¤šä¸ªä¸»ä½“å…±åŒæ‰¿æ‹…å…¨éƒ¨å€ºåŠ¡ã€‚' },
            { id:'l6', cat:'legal', en:'Breach of Contract', zh:'è¿çº¦', d:'æœªèƒ½æŒ‰ç…§åˆåŒçº¦å®šå±¥è¡Œä¹‰åŠ¡ã€‚' },
            { id:'l7', cat:'legal', en:'Arbitration', zh:'ä»²è£', d:'æäº¤ç¬¬ä¸‰æ–¹è£å†³çš„çº çº·è§£å†³æ–¹å¼ã€‚' },
            { id:'l8', cat:'legal', en:'Intellectual Property', zh:'çŸ¥è¯†äº§æƒ', d:'å…³äºä½œå“ã€å‘æ˜ç­‰æ™ºåŠ›æˆæœçš„æƒåˆ©ã€‚' },
            { id:'l9', cat:'legal', en:'Statute of Limitations', zh:'è¯‰è®¼æ—¶æ•ˆ', d:'æƒåˆ©äººè¯·æ±‚æƒçš„æ³•å®šæœŸé—´ã€‚' },
            { id:'l10', cat:'legal', en:'Articles of Association', zh:'å…¬å¸ç« ç¨‹', d:'è§„å®šå…¬å¸ç»„ç»‡åŸåˆ™çš„åŸºæœ¬å‡†åˆ™ã€‚' },
            { id:'l11', cat:'legal', en:'Power of Attorney', zh:'æˆæƒå§”æ‰˜ä¹¦', d:'ä¹¦é¢æˆæƒä»–äººè¡Œä½¿æ³•å¾‹æƒåŠ›çš„æ–‡ä»¶ã€‚' },
            { id:'l12', cat:'legal', en:'Liquidated Damages', zh:'çº¦å®šè¿çº¦é‡‘', d:'é¢„å…ˆçº¦å®šçš„è¿çº¦èµ”å¿é‡‘é¢ã€‚' },
            { id:'l13', cat:'legal', en:'Good Faith', zh:'è¯šå®ä¿¡ç”¨', d:'æ°‘æ³•åŸºæœ¬åŸåˆ™ï¼Œè¦æ±‚è¯šå®å®ˆä¿¡ã€‚' },
            { id:'l14', cat:'legal', en:'Burden of Proof', zh:'ä¸¾è¯è´£ä»»', d:'å½“äº‹äººå¯¹è‡ªå·±ä¸»å¼ æœ‰è¯æ˜è´£ä»»ã€‚' },
            { id:'l15', cat:'legal', en:'Conflict of Interest', zh:'åˆ©ç›Šå†²çª', d:'ä¸ªäººåˆ©ç›Šä¸èŒå®ˆä¹‹é—´çš„ç«äº‰ã€‚' },
            { id:'l16', cat:'legal', en:'NDA', zh:'ä¿å¯†åè®®', d:'çº¦å®šä¸å‘ç¬¬ä¸‰æ–¹æ³„éœ²ç‰¹å®šä¿¡æ¯çš„åè®®ã€‚' },
            { id:'l17', cat:'legal', en:'Exclusive Jurisdiction', zh:'ä¸“å±ç®¡è¾–', d:'æ¡ˆä»¶åªèƒ½ç”±ç‰¹å®šæ³•é™¢å—ç†ã€‚' },
            { id:'l18', cat:'legal', en:'Termination for Convenience', zh:'ä»»æ„è§£é™¤', d:'æ— éœ€ç†ç”±å³å¯ç»ˆæ­¢åˆåŒçš„æƒåˆ©ã€‚' },
            { id:'l19', cat:'legal', en:'Duty of Care', zh:'æ³¨æ„ä¹‰åŠ¡', d:'åº”è¾¾åˆ°çš„åˆç†è°¨æ…ç¨‹åº¦ã€‚' },
            { id:'l20', cat:'legal', en:'Legal Entity', zh:'æ³•äººå®ä½“', d:'ç‹¬ç«‹æ‰¿æ‹…æ°‘äº‹è´£ä»»çš„ç»„ç»‡ã€‚' },
            { id:'l21', cat:'legal', en:'Governing Law', zh:'ç®¡è¾–æ³•å¾‹', d:'è§£å†³äº‰è®®æ‰€é€‚ç”¨çš„å›½å®¶æ³•å¾‹ã€‚' },
            { id:'l22', cat:'legal', en:'Service of Process', zh:'æ–‡ä¹¦é€è¾¾', d:'äº¤ä»˜æ³•å¾‹æ–‡ä¹¦çš„æ³•å®šç¨‹åºã€‚' },
            { id:'l23', cat:'legal', en:'Injunction', zh:'ç¦ä»¤', d:'æ³•é™¢å‘å¸ƒçš„å¼ºåˆ¶æˆ–ç¦æ­¢å‘½ä»¤ã€‚' },
            { id:'l24', cat:'legal', en:'Assignment', zh:'è½¬è®©', d:'å°†åˆåŒæƒåˆ©ç§»äº¤ç»™ç¬¬ä¸‰æ–¹çš„è¡Œä¸ºã€‚' },
            { id:'l25', cat:'legal', en:'Pro Bono', zh:'æ³•å¾‹æ´åŠ©', d:'å…è´¹æä¾›çš„ä¸“ä¸šå…¬ç›ŠæœåŠ¡ã€‚' },
            { id:'l26', cat:'legal', en:'Reasonable Doubt', zh:'åˆç†æ€€ç–‘', d:'åˆ‘äº‹è¯‰è®¼ä¸­å®šç½ªå¿…é¡»æ’é™¤çš„æ ‡å‡†ã€‚' },
            { id:'l27', cat:'legal', en:'Non-Compete', zh:'ç«ä¸šé™åˆ¶', d:'ç¦»èŒåä¸å¾—ä»äº‹ç«äº‰ä¸šåŠ¡çš„çº¦å®šã€‚' },
            { id:'l28', cat:'legal', en:'Public Domain', zh:'å…¬æœ‰é¢†åŸŸ', d:'ä¸å†å—äº§æƒä¿æŠ¤çš„å…¬å¼€ä½œå“ã€‚' },
            { id:'l29', cat:'legal', en:'Precedent', zh:'åˆ¤ä¾‹', d:'å…·æœ‰çº¦æŸåŠ›çš„å…ˆå‰æ³•é™¢è£å†³ã€‚' },
            { id:'l30', cat:'legal', en:'Waiver', zh:'å¼ƒæƒ', d:'è‡ªæ„¿æ”¾å¼ƒå·²çŸ¥æƒåˆ©çš„æ³•å¾‹è¡Œä¸ºã€‚' },

            // GAMING (30)
            { id:'g1', cat:'gaming', en:'Fog of War', zh:'æˆ˜äº‰è¿·é›¾', d:'åœ°å›¾ä¸Šæœªæ¢ç´¢åŒºåŸŸè¢«é˜´å½±è¦†ç›–çš„æœºåˆ¶ã€‚' },
            { id:'g2', cat:'gaming', en:'Cooldown', zh:'å†·å´æ—¶é—´', d:'å†æ¬¡ä½¿ç”¨æŠ€èƒ½å‰å¿…é¡»ç­‰å¾…çš„æ—¶é—´ã€‚' },
            { id:'g3', cat:'gaming', en:'Aggro', zh:'ä»‡æ¨å€¼', d:'è¡¡é‡æ€ªç‰©å¯¹ç©å®¶æ”»å‡»æ¬²æœ›çš„æ•°å€¼ã€‚' },
            { id:'g4', cat:'gaming', en:'Buff / Debuff', zh:'å¢ç›Š/å‡ç›Š', d:'è§’è‰²çš„æ­£é¢æˆ–è´Ÿé¢çŠ¶æ€å½±å“ã€‚' },
            { id:'g5', cat:'gaming', en:'Easter Egg', zh:'å½©è›‹', d:'éšè—çš„æƒŠå–œä¿¡æ¯æˆ–å¹½é»˜å†…å®¹ã€‚' },
            { id:'g6', cat:'gaming', en:'Hitbox', zh:'ç¢°æ’æ¡†', d:'ç”¨äºæ£€æµ‹å—å‡»çš„éšå½¢å‡ ä½•ä½“ã€‚' },
            { id:'g7', cat:'gaming', en:'Proc', zh:'è§¦å‘', d:'éšæœºæ¦‚ç‡æ•ˆæœè¢«æˆåŠŸæ¿€æ´»ã€‚' },
            { id:'g8', cat:'gaming', en:'Loot Box', zh:'å¼€ç®±', d:'åŒ…å«éšæœºè™šæ‹Ÿå¥–åŠ±çš„å®¹å™¨ã€‚' },
            { id:'g9', cat:'gaming', en:'Fast Travel', zh:'å¿«é€Ÿæ—…è¡Œ', d:'åœ¨å·²å‘ç°åœ°ç‚¹é—´ç¬é—´ç§»åŠ¨ã€‚' },
            { id:'g10', cat:'gaming', en:'Permadeath', zh:'æ°¸ä¹…æ­»äº¡', d:'è§’è‰²æ­»äº¡åå­˜æ¡£å³å¤±æ•ˆã€‚' },
            { id:'g11', cat:'gaming', en:'QoL', zh:'ä½“éªŒä¼˜åŒ–', d:'æå‡æ“ä½œä¾¿æ·åº¦çš„å°æ”¹åŠ¨ã€‚' },
            { id:'g12', cat:'gaming', en:'NPC', zh:'éç©å®¶è§’è‰²', d:'ç”±ç”µè„‘æ§åˆ¶çš„è§’è‰²ã€‚' },
            { id:'g13', cat:'gaming', en:'Meta', zh:'ä¸»æµç­–ç•¥', d:'å½“å‰ç‰ˆæœ¬ä¸‹çš„æœ€ä¼˜ç©æ³•æ­é…ã€‚' },
            { id:'g14', cat:'gaming', en:'New Game Plus', zh:'äºŒå‘¨ç›®', d:'é€šå…³åç»§æ‰¿è£…å¤‡é‡æ–°å¼€å§‹ã€‚' },
            { id:'g15', cat:'gaming', en:'Microtransaction', zh:'å†…è´­', d:'æ¸¸æˆå†…çš„å°é¢æ¶ˆè´¹è¡Œä¸ºã€‚' },
            { id:'g16', cat:'gaming', en:'Sandbox', zh:'æ²™ç›’', d:'é«˜è‡ªç”±åº¦çš„åˆ›é€ ç±»ç©æ³•ã€‚' },
            { id:'g17', cat:'gaming', en:'Vertical Slice', zh:'å‚ç›´åˆ‡ç‰‡', d:'å±•ç¤ºæœ€ç»ˆè´¨æ„Ÿçš„å®Œæ•´åŸå‹ã€‚' },
            { id:'g18', cat:'gaming', en:'Spawn', zh:'ç”Ÿæˆ', d:'è§’è‰²åœ¨åœ°å›¾ä¸Šå‡ºç°çš„ç‚¹æˆ–è¿‡ç¨‹ã€‚' },
            { id:'g19', cat:'gaming', en:'Gacha', zh:'æŠ½å¡', d:'éšæœºè·å–å¥–åŠ±çš„å•†ä¸šæ¨¡å¼ã€‚' },
            { id:'g20', cat:'gaming', en:'Haptic', zh:'è§¦è§‰åé¦ˆ', d:'æ§åˆ¶å™¨å‘å‡ºçš„ç»†è…»éœ‡åŠ¨æ•ˆæœã€‚' },
            { id:'g21', cat:'gaming', en:'Skill Tree', zh:'æŠ€èƒ½æ ‘', d:'å±•ç¤ºèƒ½åŠ›æˆé•¿è·¯å¾„çš„ç³»ç»Ÿã€‚' },
            { id:'g22', cat:'gaming', en:'Ray Tracing', zh:'å…‰çº¿è¿½è¸ª', d:'æ¨¡æ‹Ÿå…‰çº¿ç‰©ç†è¡Œä¸ºçš„å›¾å½¢æŠ€æœ¯ã€‚' },
            { id:'g23', cat:'gaming', en:'Grinding', zh:'åˆ·æ€ª', d:'æœºæ¢°æ€§é‡å¤æˆ˜æ–—ä»¥è·å–ç»éªŒã€‚' },
            { id:'g24', cat:'gaming', en:'Early Access', zh:'æŠ¢å…ˆä½“éªŒ', d:'æœªå®Œå·¥å³å¼€æ”¾è´­ä¹°æµ‹è¯•ã€‚' },
            { id:'g25', cat:'gaming', en:'Speedrun', zh:'é€Ÿé€š', d:'ä»¥æœ€å¿«é€Ÿåº¦å®Œæˆæ¸¸æˆæŒ‘æˆ˜ã€‚' },
            { id:'g26', cat:'gaming', en:'Dynamic Weather', zh:'åŠ¨æ€å¤©æ°”', d:'éšæ—¶é—´è‡ªåŠ¨å˜åŒ–çš„ç³»ç»Ÿã€‚' },
            { id:'g27', cat:'gaming', en:'Mana / MP', zh:'æ³•åŠ›å€¼', d:'æ–½æ”¾æŠ€èƒ½æ‰€æ¶ˆè€—çš„èƒ½é‡ã€‚' },
            { id:'g28', cat:'gaming', en:'Side Quest', zh:'æ”¯çº¿ä»»åŠ¡', d:'éä¸»çº¿çš„é¢å¤–å¯é€‰ä»»åŠ¡ã€‚' },
            { id:'g29', cat:'gaming', en:'DLC', zh:'ä¸‹è½½å†…å®¹', d:'å‘å”®åå‘å¸ƒçš„æ•°å­—æ‰©å±•å†…å®¹ã€‚' },
            { id:'g30', cat:'gaming', en:'Mod', zh:'æ¨¡ç»„', d:'ç©å®¶å¼€å‘çš„ä¿®æ”¹æˆ–æ’ä»¶ã€‚' },

            // FOOD (30)
            { id:'f1', cat:'food', en:'Maillard', zh:'ç¾æ‹‰å¾·ååº”', d:'é«˜æ¸©ä¸‹äº§ç”Ÿçš„é£å‘³è¤å˜ååº”ã€‚' },
            { id:'f2', cat:'food', en:'Stir-fry', zh:'ç…¸ç‚’', d:'å°‘é‡çƒ­æ²¹ä¸­å¿«é€Ÿç¿»ç‚’é£Ÿæã€‚' },
            { id:'f3', cat:'food', en:'Al Dente', zh:'å¼¹ç‰™', d:'æ„é¢ç…®å¾—ä¸­å¿ƒç¨ç¡¬æœ‰åš¼åŠ²ã€‚' },
            { id:'f4', cat:'food', en:'Aroma Wheel', zh:'é£å‘³è½®', d:'æè¿°é£å‘³çš„ç³»ç»Ÿå›¾è°±ã€‚' },
            { id:'f5', cat:'food', en:'Red-braised', zh:'çº¢çƒ§', d:'åˆ©ç”¨é…±æ²¹å†°ç³–ä¸Šè‰²çš„æŠ€æ³•ã€‚' },
            { id:'f6', cat:'food', en:'Farm-to-table', zh:'å†œåœºåˆ°é¤æ¡Œ', d:'å¼ºè°ƒé£Ÿææ–°é²œå½“åœ°çš„ç†å¿µã€‚' },
            { id:'f7', cat:'food', en:'Acidity', zh:'é…¸åº¦', d:'æ˜äº®ä¸”ä»¤äººæ„‰æ‚¦çš„é…¸æ„Ÿã€‚' },
            { id:'f8', cat:'food', en:'Simmer', zh:'æ–‡ç«æ…¢ç‚–', d:'ä¿æŒæ¶²ä½“æ¥è¿‘æ²¸ç‚¹å°ç«åŠ çƒ­ã€‚' },
            { id:'f9', cat:'food', en:'Cleanser', zh:'æ¸…å£èœ', d:'æ¸…é™¤å‰èœä½™å‘³çš„å†°æ²™ç­‰ã€‚' },
            { id:'f10', cat:'food', en:'Wok Hei', zh:'é•¬æ°”', d:'é«˜æ¸©äº§ç”Ÿçš„çµé­‚ç„¦é¦™å‘³ã€‚' },
            { id:'f11', cat:'food', en:'Mouthfeel', zh:'å£æ„Ÿ', d:'å£è…”å†…äº§ç”Ÿçš„ç‰©ç†æ„Ÿå—ã€‚' },
            { id:'f12', cat:'food', en:'Deep-fry', zh:'æ²¹ç‚¸', d:'å®Œå…¨æµ¸å…¥æ²¹è„‚çƒ¹é¥ªçš„æ–¹æ³•ã€‚' },
            { id:'f13', cat:'food', en:'Umami', zh:'é²œå‘³', d:'é™¤äº†é…¸ç”œè‹¦å’¸å¤–çš„ç¬¬äº”å‘³ã€‚' },
            { id:'f14', cat:'food', en:'Sous-vide', zh:'ä½æ¸©æ…¢ç…®', d:'çœŸç©ºåŒ…è£…æ’æ¸©åŠ çƒ­æŠ€æ³•ã€‚' },
            { id:'f15', cat:'food', en:'Blanch', zh:'ç„¯æ°´', d:'çŸ­æš‚æ”¾å…¥æ²¸æ°´ä¸­çƒ«æ´—ã€‚' },
            { id:'f16', cat:'food', en:'Sommelier', zh:'ä¾é…’å¸ˆ', d:'ä¸“ä¸šçš„é…’æ°´é…é¤å»ºè®®ä¸“å®¶ã€‚' },
            { id:'f17', cat:'food', en:'Infusion', zh:'æµ¸æ¸', d:'æ¶²ä½“æå–é£Ÿæé£å‘³çš„è¿‡ç¨‹ã€‚' },
            { id:'f18', cat:'food', en:'Zest', zh:'çš®å±‘', d:'æŸ‘æ©˜ç±»æ°´æœæœ€å¤–å±‚èŠ³é¦™çš®ã€‚' },
            { id:'f19', cat:'food', en:'Dim Sum', zh:'ç‚¹å¿ƒ', d:'ç²¾è‡´çš„ç²¤å¼èŒ¶ç‚¹å°åƒã€‚' },
            { id:'f20', cat:'food', en:'Decant', zh:'é†’é…’', d:'å€’å‡ºé…’æ¶²ä½¿å…¶ä¸ç©ºæ°”æ¥è§¦ã€‚' },
            { id:'f21', cat:'food', en:'Texture', zh:'è´¨åœ°', d:'æè¿°è„†ã€è½¯ã€é…¥ç­‰ç‰©ç†ç‰¹å¾ã€‚' },
            { id:'f22', cat:'food', en:'Garnish', zh:'ç›˜é¥°', d:'ç”¨äºè£…é¥°èœè‚´çš„ç‚¹ç¼€ç‰©ã€‚' },
            { id:'f23', cat:'food', en:'Steaming', zh:'è’¸', d:'åˆ©ç”¨æ°´è’¸æ°”åŠ çƒ­ä¿ç•™è¥å…»ã€‚' },
            { id:'f24', cat:'food', en:'Tannin', zh:'å•å®', d:'çº¢é…’ä¸­å¸¦æ¥çš„æ”¶æ•›æ¶©æ„Ÿã€‚' },
            { id:'f25', cat:'food', en:'Fermentation', zh:'å‘é…µ', d:'å¾®ç”Ÿç‰©è½¬åŒ–é£Ÿç‰©çš„è¿‡ç¨‹ã€‚' },
            { id:'f26', cat:'food', en:'Velveting', zh:'ä¸Šæµ†', d:'è‚‰ç±»è£¹æ·€ç²‰ä¿æŒé²œå«©è´¨æ„Ÿã€‚' },
            { id:'f27', cat:'food', en:'Body', zh:'é…’ä½“/é†‡åšåº¦', d:'æè¿°æ¶²ä½“åœ¨å£ä¸­çš„é‡é‡æ„Ÿã€‚' },
            { id:'f28', cat:'food', en:'Glaze', zh:'æŒ‚æ±', d:'åœ¨é£Ÿç‰©è¡¨é¢æ·‹ä¸Šå‘äº®æ¶²ä½“ã€‚' },
            { id:'f29', cat:'food', en:'Offal', zh:'å†…è„', d:'åŠ¨ç‰©çš„å¯é£Ÿç”¨å™¨å®˜æ‚ç¢ã€‚' },
            { id:'f30', cat:'food', en:'Aftertaste', zh:'ä½™éŸµ', d:'åå’½åç•™åœ¨å–‰é—´çš„é£å‘³ã€‚' }
        ];

        let curCat = 'all';
        let mem = JSON.parse(localStorage.getItem('lexi_v6') || '{}');

        // æœç´¢é€»è¾‘
        function doSearch() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const container = document.getElementById('listContainer');
            const filtered = library.filter(i => 
                (curCat === 'all' || i.cat === curCat) && 
                (i.en.toLowerCase().includes(q) || i.zh.includes(q))
            );

            container.innerHTML = filtered.map(i => `
                <div class="glass p-6 rounded-[2rem] flex justify-between items-center card-bounce hover:shadow-md" onclick="addToLearn('${i.id}')">
                    <div>
                        <h4 class="font-bold text-lg tracking-tight">${i.en}</h4>
                        <p class="text-gray-400 text-xs font-medium mt-1">${i.zh}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-[10px] font-black ${mem[i.id] ? 'text-blue-500' : 'text-gray-200'}">â—</span>
                    </div>
                </div>
            `).join('');
        }

        // å­¦ä¹ é€»è¾‘
        function addToLearn(id) {
            if(!mem[id]) {
                mem[id] = { lvl: 1, t: Date.now() };
                localStorage.setItem('lexi_v6', JSON.stringify(mem));
                doSearch();
            }
        }

        function renderLearn() {
            const now = Date.now();
            const toReview = library.filter(i => mem[i.id] && (mem[i.id].t <= now));
            document.getElementById('reviewCount').innerText = toReview.length;
            
            const stage = document.getElementById('cardStage');
            if(toReview.length === 0) {
                stage.innerHTML = `<div class="mt-20 fade-in"><p class="text-3xl">ğŸŒ¿</p><p class="text-gray-400 text-sm mt-4 font-medium">æš‚æ—¶æ²¡æœ‰éœ€è¦å¤ä¹ çš„è¯æ¡</p></div>`;
            } else {
                const i = toReview[0];
                stage.innerHTML = `
                    <div class="glass p-12 rounded-[3.5rem] shadow-2xl fade-in relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-6 opacity-[0.03] text-6xl font-black uppercase">${i.cat}</div>
                        <h2 class="text-4xl font-black mb-10 tracking-tighter serif-title">${i.en}</h2>
                        <div id="ans" class="hidden mb-10">
                            <p class="text-2xl font-bold text-blue-500 mb-2">${i.zh}</p>
                            <p class="text-xs text-gray-400 leading-relaxed px-4">${i.d}</p>
                        </div>
                        <button id="showBtn" onclick="document.getElementById('ans').classList.remove('hidden'); this.classList.add('hidden')" 
                                class="mb-10 text-[10px] font-black tracking-[0.2em] text-blue-500 uppercase border-b border-blue-100 pb-1">Tap to reveal</button>
                        <div class="flex space-x-4">
                            <button onclick="save(true,'${i.id}')" class="flex-1 py-5 rounded-3xl bg-blue-500 text-white font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all">è®¤è¯†</button>
                            <button onclick="save(false,'${i.id}')" class="flex-1 py-5 rounded-3xl bg-slate-100 dark:bg-slate-800 text-gray-400 font-black active:scale-95 transition-all">æ¨¡ç³Š</button>
                        </div>
                    </div>
                `;
            }
        }

        function save(known, id) {
            const gap = [0, 1, 12, 24, 48, 168]; // å¤ä¹ é—´éš”ï¼ˆå°æ—¶ï¼‰
            mem[id].lvl = known ? Math.min(mem[id].lvl+1, 5) : 1;
            mem[id].t = Date.now() + gap[mem[id].lvl] * 3600000;
            localStorage.setItem('lexi_v6', JSON.stringify(mem));
            renderLearn();
        }

        // è§†å›¾åˆ‡æ¢
        function showPage(p) {
            document.getElementById('view-search').classList.toggle('view-hidden', p !== 'search');
            document.getElementById('view-learn').classList.toggle('view-hidden', p !== 'learn');
            document.getElementById('btn-search').classList.toggle('active-tab', p === 'search');
            document.getElementById('btn-learn').classList.toggle('active-tab', p === 'learn');
            if(p === 'learn') renderLearn();
        }

        function setCat(c) {
            curCat = c;
            const btns = document.querySelectorAll('#catFilter button');
            btns.forEach(b => {
                b.classList.remove('bg-blue-500', 'text-white');
                if(b.innerText.toLowerCase().includes(c)) {
                    b.classList.add('bg-blue-500', 'text-white');
                }
            });
            if(c === 'all') btns[0].classList.add('bg-blue-500', 'text-white');
            doSearch();
        }

        function toggleDark() {
            document.body.classList.toggle('dark-mode');
            document.getElementById('darkIcon').innerText = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        window.onload = () => { doSearch(); };
    </script>
</body>
</html>
