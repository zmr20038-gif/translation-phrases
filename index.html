<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LexiFlow Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --m-blue: #B9C9D6;   --m-blue-light: #E8EEF2;
            --m-green: #C2CFB2;  --m-green-light: #F0F4E8;
            --m-rose: #D9B8B5;   --m-rose-light: #F7E9E8;
            --accent: #5D6D7E;
        }
        body { background: #F8FAFC; font-family: 'Plus Jakarta Sans', sans-serif; color: #4A5568; transition: background 0.4s ease; -webkit-tap-highlight-color: transparent; }
        .dark-mode { background: #111827 !important; color: #E2E8F0; }
        
        /* è«å…°è¿ªå¡ç‰‡ç³»ç»Ÿ */
        .card-legal { background: var(--m-blue-light); border: 1px solid rgba(185, 201, 214, 0.4); }
        .card-gaming { background: var(--m-green-light); border: 1px solid rgba(194, 207, 178, 0.4); }
        .card-food { background: var(--m-rose-light); border: 1px solid rgba(217, 184, 181, 0.4); }
        .dark-mode .card-legal, .dark-mode .card-gaming, .dark-mode .card-food { background: #1F2937; border-color: #374151; }

        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); }
        .dark-mode .glass { background: rgba(31, 41, 55, 0.8); }

        #settingsPanel { transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        #settingsPanel.open { transform: translateX(0); }
        .view-hidden { display: none !important; }
        .nav-active { color: var(--accent); font-weight: 800; }
        .nav-active::after { content: ''; display: block; width: 4px; height: 4px; background: var(--accent); border-radius: 50%; margin: 2px auto; }
    </style>
</head>
<body class="min-h-screen pb-24 overflow-x-hidden">

    <header class="px-6 pt-10 flex justify-between items-end max-w-2xl mx-auto">
        <div>
            <h1 class="text-3xl font-[800] tracking-tighter italic text-slate-800 dark:text-white">LexiFlow</h1>
            <p id="pageTitle" class="text-[10px] font-bold opacity-40 uppercase tracking-[0.3em]">Learn Dashboard</p>
        </div>
        <button onclick="toggleSettings(true)" class="w-10 h-10 rounded-full glass flex items-center justify-center shadow-sm">âš™ï¸</button>
    </header>

    <main id="page-learn" class="px-6 mt-8 max-w-2xl mx-auto">
        <div class="card-legal p-8 rounded-[2.5rem] mb-10 shadow-sm relative">
            <span class="absolute top-6 right-8 text-[10px] font-black opacity-20 tracking-widest uppercase">Word of Today</span>
            <h2 class="text-4xl font-black mb-2 tracking-tighter">Bona Fide</h2>
            <p class="text-xl font-bold mb-4 opacity-70">å–„æ„ï¼›è¯šå®åœ°</p>
            <p class="text-sm opacity-50 leading-relaxed italic">æ³•å¾‹æœ¯è¯­ã€‚æŒ‡å½“äº‹äººåœ¨è¿›è¡Œæ³•å¾‹è¡Œä¸ºæ—¶ï¼Œä¸»è§‚ä¸Šå‡ºäºçœŸè¯šã€æ²¡æœ‰æ¬ºè¯ˆæˆ–æŸå®³ä»–äººæƒåˆ©çš„æ„å›¾ã€‚</p>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-10">
            <div class="glass p-7 rounded-[2.2rem] text-center border border-white/40 shadow-sm">
                <p class="text-[9px] font-black opacity-30 uppercase tracking-[0.2em] mb-1">éœ€å­¦ä¹  New</p>
                <p id="count-new" class="text-4xl font-black text-slate-600 dark:text-slate-300">0</p>
            </div>
            <div class="glass p-7 rounded-[2.2rem] text-center border border-white/40 shadow-sm">
                <p class="text-[9px] font-black opacity-30 uppercase tracking-[0.2em] mb-1">éœ€å¤ä¹  Review</p>
                <p id="count-review" class="text-4xl font-black text-slate-400">0</p>
            </div>
        </div>

        <button onclick="alert('ä»Šæ—¥å­¦ä¹ ä»»åŠ¡å·²è‡ªåŠ¨åˆ†é…ï¼Œè¯·åœ¨Searché¡µç‚¹å‡»æ„Ÿå…´è¶£çš„è¯æ¡åŠ å…¥è®¡åˆ’')" class="w-full py-6 glass rounded-3xl font-black text-sm opacity-50 tracking-widest border border-dashed border-slate-300 uppercase">Start Session</button>
    </main>

    <main id="page-search" class="px-6 mt-8 max-w-2xl mx-auto view-hidden">
        <div class="glass rounded-[2rem] p-2 flex items-center px-6 mb-8 shadow-inner border border-white/20">
            <input type="text" id="searchInput" oninput="doSearch()" placeholder="Search professional phrases..." class="w-full bg-transparent py-4 focus:outline-none text-lg">
            <span class="opacity-20 text-xl">ğŸ”</span>
        </div>
        <div id="listContainer" class="space-y-5 pb-10"></div>
    </main>

    <div id="settingsOverlay" onclick="toggleSettings(false)" class="fixed inset-0 bg-black/5 backdrop-blur-sm z-[110] hidden"></div>
    <div id="settingsPanel" class="fixed top-0 right-0 h-full w-72 glass z-[120] p-8 shadow-2xl border-l border-white/20">
        <h3 class="text-xl font-black mb-10">Preferences</h3>
        <div class="space-y-10">
            <div>
                <label class="text-[10px] font-black opacity-30 uppercase tracking-widest block mb-4">Daily Goal</label>
                <input type="range" id="goalRange" min="5" max="50" step="5" oninput="updateGoal(this.value)" class="w-full accent-slate-400">
                <p class="text-right text-sm font-bold mt-2"><span id="goalVal">10</span> Words</p>
            </div>
            <div>
                <label class="text-[10px] font-black opacity-30 uppercase tracking-widest block mb-4">Interface</label>
                <button onclick="toggleDark()" class="w-full py-4 glass rounded-2xl font-bold flex justify-between px-5 text-sm">
                    <span>Dark Mode</span><span id="darkIcon">ğŸŒ™</span>
                </button>
            </div>
            <button onclick="localStorage.clear(); location.reload();" class="text-[10px] font-black opacity-20 uppercase tracking-widest mt-20 block">Clear All Progress</button>
        </div>
    </div>

    <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 w-[280px] h-20 glass rounded-[2.5rem] shadow-2xl flex items-center justify-around z-[100] border border-white/30">
        <button onclick="switchView('learn')" id="nav-learn" class="flex flex-col items-center nav-active">
            <span class="text-2xl">ğŸ“–</span><span class="text-[9px] font-black uppercase mt-1">Learn</span>
        </button>
        <button onclick="switchView('search')" id="nav-search" class="flex flex-col items-center opacity-30">
            <span class="text-2xl">ğŸ§©</span><span class="text-[9px] font-black uppercase mt-1">Explore</span>
        </button>
    </nav>

    <script>
        const library = [
            // LEGAL - 10 
            { id:'l1', cat:'legal', en:'Without Prejudice', zh:'ä¸æŸå®³æƒåˆ©ï¼›æ— åè§', d:'åœ¨æ³•å¾‹è°ˆåˆ¤ä¸­ä½¿ç”¨ï¼Œæ„å‘³ç€åœ¨è¯¥å£°æ˜ä¸‹æ‰€ä½œçš„ä»»ä½•è®©æ­¥æˆ–é™ˆè¿°å‡ä¸èƒ½åœ¨æ—¥åçš„æ³•åº­è¯‰è®¼ä¸­ä½œä¸ºè¯æ®ã€‚' },
            { id:'l2', cat:'legal', en:'Force Majeure', zh:'ä¸å¯æŠ—åŠ›', d:'åˆåŒä¸­çš„å…è´£æ¡æ¬¾ï¼ŒæŒ‡ç”±äºä¸èƒ½é¢„è§ã€ä¸èƒ½é¿å…ä¸”ä¸èƒ½å…‹æœçš„å®¢è§‚æƒ…å†µï¼ˆå¦‚å¤©ç¾ã€æˆ˜äº‰ï¼‰å¯¼è‡´åˆåŒæ— æ³•å±¥è¡Œã€‚' },
            { id:'l3', cat:'legal', en:'Due Diligence', zh:'å°½èŒè°ƒæŸ¥', d:'åœ¨ç­¾ç½²å•†ä¸šåè®®æˆ–è¿›è¡Œå¹¶è´­å‰ï¼Œå¯¹èµ„äº§ã€è´¢åŠ¡çŠ¶å†µåŠæ³•å¾‹é£é™©è¿›è¡Œçš„å…¨é¢è°ƒæŸ¥ä¸è¯„ä¼°ã€‚' },
            { id:'l4', cat:'legal', en:'Indemnification', zh:'èµ”å¿ä¿è¯ï¼›å…å—æŸå¤±', d:'ä¸€æ–¹æ‰¿è¯ºå¯¹å¦ä¸€æ–¹å› ç‰¹å®šäº‹ä»¶æˆ–ç¬¬ä¸‰æ–¹ç´¢èµ”è€Œé­å—çš„æŸå¤±ã€æŸå®³æˆ–è´£ä»»è¿›è¡Œè¡¥å¿ã€‚' },
            { id:'l5', cat:'legal', en:'Statute of Limitations', zh:'è¯‰è®¼æ—¶æ•ˆ', d:'æ³•å¾‹è§„å®šå½“äº‹äººè¡Œä½¿è¯·æ±‚æƒçš„æ—¶é—´é™åˆ¶ï¼Œè¶…è¿‡è¯¥æœŸé™åï¼Œæƒåˆ©äººå°†ä¸§å¤±é€šè¿‡æ³•é™¢èƒœè¯‰çš„æƒåˆ©ã€‚' },
            { id:'l6', cat:'legal', en:'Liquidated Damages', zh:'é¢„å®šè¿çº¦é‡‘', d:'åˆåŒåŒæ–¹é¢„å…ˆçº¦å®šçš„ï¼Œåœ¨ä¸€æ–¹è¿çº¦æ—¶åº”æ”¯ä»˜ç»™å¦ä¸€æ–¹çš„å›ºå®šé‡‘é¢çš„èµ”å¿é‡‘ã€‚' },
            { id:'l7', cat:'legal', en:'Arbitration', zh:'ä»²è£', d:'ä¸€ç§éè¯‰è®¼çš„çº çº·è§£å†³æ–¹å¼ï¼Œç”±ä¸­ç«‹çš„ç¬¬ä¸‰æ–¹ä»²è£å‘˜æ ¹æ®åŒæ–¹åè®®å¯¹äº‰è®®ä½œå‡ºè£å†³ã€‚' },
            { id:'l8', cat:'legal', en:'Joint Liability', zh:'è¿å¸¦è´£ä»»', d:'æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå½“äº‹äººå…±åŒæ‰¿æ‹…å€ºåŠ¡ï¼Œå€ºæƒäººå¯ä»¥è¦æ±‚å…¶ä¸­ä»»ä½•ä¸€äººæ‰¿æ‹…å…¨éƒ¨æ¸…å¿è´£ä»»ã€‚' },
            { id:'l9', cat:'legal', en:'Intellectual Property', zh:'çŸ¥è¯†äº§æƒ', d:'æ³•å¾‹èµ‹äºˆäººä»¬å¯¹å…¶æ™ºåŠ›åŠ³åŠ¨æˆæœæ‰€äº«æœ‰çš„ä¸“æœ‰æƒåˆ©ï¼ŒåŒ…æ‹¬è‘—ä½œæƒã€ä¸“åˆ©æƒã€å•†æ ‡æƒç­‰ã€‚' },
            { id:'l10', cat:'legal', en:'Subpoena', zh:'ä¼ ç¥¨', d:'æ³•é™¢æˆ–æ”¿åºœæœºæ„å‘å¸ƒçš„å¼ºåˆ¶æ€§å‘½ä»¤ï¼Œè¦æ±‚æŸäººåœ¨æŒ‡å®šæ—¶é—´å‡ºåº­ä½œè¯æˆ–æäº¤ç›¸å…³æ–‡ä»¶ã€‚' },

            // GAMING - 10
            { id:'g1', cat:'gaming', en:'Fog of War', zh:'æˆ˜äº‰è¿·é›¾', d:'å®æ—¶æˆ˜ç•¥æ¸¸æˆä¸­ç”¨äºé®è”½æœªæ¢ç´¢åŒºåŸŸçš„è§†è§‰æ•ˆæœï¼Œç©å®¶å¿…é¡»æ´¾é£å•ä½å‰å¾€è¯¥å¤„æ‰èƒ½è§£é”è§†é‡ã€‚' },
            { id:'g2', cat:'gaming', en:'Procedural Generation', zh:'éšæœºç”Ÿæˆ', d:'åˆ©ç”¨é¢„è®¾å¥½çš„ç®—æ³•è€Œéäººå·¥è®¾è®¡æ¥è‡ªåŠ¨åˆ›å»ºæ¸¸æˆå†…å®¹ï¼ˆå¦‚å…³å¡ã€åœ°å›¾ã€è£…å¤‡å±æ€§ï¼‰çš„æŠ€æœ¯ã€‚' },
            { id:'g3', cat:'gaming', en:'Hitbox', zh:'ç¢°æ’æ¡†', d:'æ¸¸æˆä¸­ç”¨äºæ£€æµ‹æ”»å‡»æˆ–ç¢°æ’çš„ä¸å¯è§å‡ ä½•å½¢çŠ¶ã€‚å¦‚æœæ”»å‡»è€…çš„æ”»å‡»åˆ¤å®šé‡å äº†å—å®³è€…çš„Hitboxï¼Œåˆ™è§†ä¸ºå‘½ä¸­ã€‚' },
            { id:'g4', cat:'gaming', en:'Metagame', zh:'å…ƒæ¸¸æˆï¼›ä¸»æµæˆ˜æœ¯', d:'æŒ‡ç©å®¶ç¾¤ä½“åœ¨å½“å‰ç‰ˆæœ¬ä¸­æ ¹æ®æ¸¸æˆæœºåˆ¶æ€»ç»“å‡ºçš„æœ€é«˜æ•ˆã€æœ€é€šç”¨çš„æˆ˜æœ¯ã€é˜µå®¹æˆ–è£…å¤‡æ­é…ã€‚' },
            { id:'g5', cat:'gaming', en:'Microtransaction', zh:'å¾®äº¤æ˜“ï¼›å†…è´­', d:'æ¸¸æˆå†…çš„å°é¢ä»˜è´¹è¡Œä¸ºï¼Œé€šå¸¸ç”¨äºè´­ä¹°çš®è‚¤ã€è™šæ‹Ÿé“å…·ã€ç»éªŒåŠ æˆæˆ–å¼€ç®±æŠ½å–ã€‚' },
            { id:'g6', cat:'gaming', en:'Permadeath', zh:'æ°¸ä¹…æ­»äº¡', d:'Roguelikeæ¸¸æˆçš„æ ¸å¿ƒæœºåˆ¶ï¼ŒæŒ‡ç©å®¶è§’è‰²ä¸€æ—¦æ­»äº¡ï¼Œæ‰€æœ‰è¿›åº¦å°†è¢«æ¸…ç©ºï¼Œæ— æ³•é€šè¿‡è¯»å–å­˜æ¡£å¤æ´»ã€‚' },
            { id:'g7', cat:'gaming', en:'Frame Data', zh:'å¸§æ•°æ•°æ®', d:'æ ¼æ–—æ¸¸æˆä¸­çš„ç¡¬æ ¸æ¦‚å¿µï¼Œé€šè¿‡è®°å½•åŠ¨ä½œå¯åŠ¨ã€æŒç»­å’Œæ¢å¤çš„å…·ä½“å¸§æ•°æ¥åˆ¤å®šæ‹›å¼çš„ä¼˜åŠ£ã€‚' },
            { id:'g8', cat:'gaming', en:'Sandbox', zh:'æ²™ç›’', d:'æŒ‡å…·å¤‡é«˜åº¦è‡ªç”±åº¦çš„æ¸¸æˆç±»å‹ï¼Œç©å®¶å¯ä»¥è‡ªç”±æ”¹å˜ä¸–ç•Œç»“æ„ã€åˆ›é€ ç‰©å“ï¼Œæ²¡æœ‰å¼ºåˆ¶æ€§çš„å•ä¸€ä¸»çº¿ä»»åŠ¡ã€‚' },
            { id:'g9', cat:'gaming', en:'Early Access', zh:'æŠ¢å…ˆä½“éªŒ', d:'å¼€å‘è€…åœ¨æ¸¸æˆå°šæœªæ­£å¼å®Œæˆæ—¶æå‰å”®å–ï¼Œè®©ç©å®¶å‚ä¸æµ‹è¯•å¹¶æä¾›åé¦ˆï¼ŒåŒæ—¶å¹³è¡¡å¼€å‘èµ„é‡‘ã€‚' },
            { id:'g10', cat:'gaming', en:'Aggro', zh:'ä»‡æ¨å€¼', d:'MMORPGä¸­è¡¡é‡æ€ªç‰©å¯¹ä¸åŒç©å®¶æ”»å‡»æ¬²æœ›çš„æ•°å€¼ï¼Œé€šå¸¸ç”±å¦å…‹ä½ç©å®¶é€šè¿‡ç‰¹å®šæŠ€èƒ½æ¥ç»´æŒã€‚' },

            // FOOD - 10
            { id:'f1', cat:'food', en:'Maillard Reaction', zh:'ç¾æ‹‰å¾·ååº”', d:'é£Ÿç‰©ä¸­çš„æ°¨åŸºé…¸ä¸è¿˜åŸç³–åœ¨åŠ çƒ­è¿‡ç¨‹ä¸­å‘ç”Ÿçš„éé…¶è¤å˜ï¼Œæ˜¯äº§ç”Ÿç„¦é¦™å‘³å’Œè¤è‰²è¯±äººå¤–è§‚çš„æ ¸å¿ƒã€‚' },
            { id:'f2', cat:'food', en:'Sous-vide', zh:'ä½æ¸©æ…¢ç…®', d:'å°†é£Ÿææ”¾å…¥çœŸç©ºè¢‹ä¸­ï¼Œåœ¨æ’æ¸©æ°´æµ´é”…ä¸­ä»¥ç›¸å¯¹è¾ƒä½çš„æ¸©åº¦é•¿æ—¶é—´åŠ çƒ­ï¼Œä»¥ä¿æŒé£Ÿææè‡´çš„æ°´åˆ†å’Œå«©åº¦ã€‚' },
            { id:'f3', cat:'food', en:'Al Dente', zh:'å¼¹ç‰™ï¼›ç­‹é“', d:'æºè‡ªæ„å¤§åˆ©è¯­ï¼Œå½¢å®¹æ„å¤§åˆ©é¢æˆ–ç±³é¥­ç…®å¾—æ°åˆ°å¥½å¤„ï¼Œå¤–è¡¨æŸ”è½¯ä½†ä¸­å¿ƒå¤„ä¿ç•™äº†ä¸€ä¸åš¼åŠ²ã€‚' },
            { id:'f4', cat:'food', en:'Umami', zh:'é²œå‘³', d:'é™¤äº†é…¸ã€ç”œã€è‹¦ã€å’¸ä¹‹å¤–çš„ç¬¬äº”ç§åŸºæœ¬å‘³é“ï¼Œç”±è°·æ°¨é…¸ç›ç­‰ç‰©è´¨å¼•èµ·ï¼Œå¸¸è§äºæµ·å¸¦ã€è˜‘è‡å’Œé«˜æ±¤ã€‚' },
            { id:'f5', cat:'food', en:'Farm-to-Table', zh:'ä»å†œåœºåˆ°é¤æ¡Œ', d:'ä¸€ç§é¤é¥®ç†å¿µï¼Œå¼ºè°ƒç›´æ¥ä½¿ç”¨å½“åœ°æ–°é²œã€æ—¶ä»¤çš„å†œäº§å“ï¼Œå‡å°‘è¿è¾“ç¯èŠ‚å’Œå·¥ä¸šåŒ–åŠ å·¥ã€‚' },
            { id:'f6', cat:'food', en:'Sommelier', zh:'ä¾é…’å¸ˆ', d:'é¤å…å†…ç»è¿‡ä¸“ä¸šåŸ¹è®­ï¼Œè´Ÿè´£é…’å•è®¾è®¡ã€é…’æ°´å‚¨è—ä»¥åŠä¸ºé¡¾å®¢æä¾›é¤é…’æ­é…å»ºè®®çš„é«˜çº§æœåŠ¡äººå‘˜ã€‚' },
            { id:'f7', cat:'food', en:'Molecular Gastronomy', zh:'åˆ†å­æ–™ç†', d:'é€šè¿‡ç§‘å­¦æ‰‹æ®µï¼ˆå¦‚æ¶²æ°®ã€ä¹³åŒ–ã€çƒåŒ–ï¼‰æ”¹å˜é£Ÿæçš„ç‰©ç†æ€§çŠ¶ï¼Œåˆ›é€ å‡ºé¢ è¦†ä¼ ç»Ÿçš„å½¢æ€ä¸å£æ„Ÿã€‚' },
            { id:'f8', cat:'food', en:'Mouthfeel', zh:'å£æ„Ÿ', d:'æŒ‡é£Ÿç‰©æˆ–é¥®æ–™è¿›å…¥å£è…”åï¼Œå¸¦ç»™èˆŒå¤´å’Œä¸Šé¢šçš„ç‰©ç†è§¦è§‰æ„Ÿå—ï¼ˆå¦‚ä¸æ»‘ã€ç²—ç³™ã€é»ç¨ ï¼‰ã€‚' },
            { id:'f9', cat:'food', en:'Reduction', zh:'æµ“ç¼©é…±æ±', d:'é€šè¿‡é•¿æ—¶é—´çš„å°ç«ç†¬ç…®æ’èµ°æ¶²ä½“ä¸­çš„æ°´åˆ†ï¼Œä½¿å‰©ä½™ç‰©è´¨çš„æµ“åº¦å¢åŠ ã€é£å‘³å˜å¾—æåº¦æµ“éƒã€‚' },
            { id:'f10', cat:'food', en:'Aroma', zh:'é¦™æ°”', d:'æŒ‡é£Ÿç‰©æ•£å‘å‡ºçš„æŒ¥å‘æ€§åŒ–å­¦ç‰©è´¨è¢«å—…è§‰ç»†èƒæ•æ‰åäº§ç”Ÿçš„æ„Ÿå—ï¼Œæ˜¯æ„æˆé£Ÿç‰©é£å‘³çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚' }
        ];

        let state = {
            view: 'learn',
            goal: 10,
            mem: JSON.parse(localStorage.getItem('lexi_pro_data') || '{}')
        };

        function switchView(view) {
            state.view = view;
            document.getElementById('page-learn').classList.toggle('view-hidden', view !== 'learn');
            document.getElementById('page-search').classList.toggle('view-hidden', view !== 'search');
            document.getElementById('nav-learn').classList.toggle('opacity-30', view !== 'learn');
            document.getElementById('nav-search').classList.toggle('opacity-30', view !== 'search');
            document.getElementById('nav-learn').classList.toggle('nav-active', view === 'learn');
            document.getElementById('nav-search').classList.toggle('nav-active', view === 'search');
            document.getElementById('pageTitle').innerText = view === 'learn' ? 'Learn Dashboard' : 'Explore Library';
        }

        function doSearch() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const container = document.getElementById('listContainer');
            const filtered = library.filter(i => i.en.toLowerCase().includes(q) || i.zh.includes(q) || i.d.includes(q));

            container.innerHTML = filtered.map(i => `
                <div class="card-${i.cat} p-8 rounded-[2.5rem] shadow-sm active:scale-95 transition-transform" onclick="addToLearn('${i.id}')">
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-2xl font-black tracking-tighter text-slate-800 dark:text-white">${i.en}</h4>
                        <span class="text-[9px] font-black opacity-20 uppercase tracking-widest glass px-2 py-1 rounded">${i.cat}</span>
                    </div>
                    <p class="text-lg font-bold mb-4 opacity-70">${i.zh}</p>
                    <p class="text-xs opacity-40 leading-relaxed">${i.d}</p>
                    ${state.mem[i.id] ? '<div class="mt-4 text-[9px] font-black uppercase tracking-widest opacity-20 text-slate-600">Added to Plan âœ“</div>' : ''}
                </div>
            `).join('');
        }

        function addToLearn(id) {
            if(!state.mem[id]) {
                state.mem[id] = { lvl: 1, t: Date.now() };
                localStorage.setItem('lexi_pro_data', JSON.stringify(state.mem));
                doSearch();
                updateCounts();
            }
        }

        function updateCounts() {
            const learned = Object.keys(state.mem).length;
            document.getElementById('count-new').innerText = Math.max(0, state.goal - learned);
            document.getElementById('count-review').innerText = "0";
        }

        function toggleSettings(show) {
            document.getElementById('settingsPanel').classList.toggle('open', show);
            document.getElementById('settingsOverlay').classList.toggle('hidden', !show);
        }

        function updateGoal(val) {
            state.goal = val;
            document.getElementById('goalVal').innerText = val;
            localStorage.setItem('lexi_pro_goal', val);
            updateCounts();
        }

        function toggleDark() {
            document.body.classList.toggle('dark-mode');
            document.getElementById('darkIcon').innerText = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        // åˆå§‹åŒ–
        switchView('learn');
        updateCounts();
        doSearch();
        const savedGoal = localStorage.getItem('lexi_pro_goal');
        if(savedGoal) { state.goal = savedGoal; document.getElementById('goalRange').value = savedGoal; document.getElementById('goalVal').innerText = savedGoal; }
    </script>
</body>
</html>
